Against netbsd.org/~mbalmer/diffs/kernel_lua_010.diff:

1. No need to check for ENOMEM when M_WAITOK is set (by default)
2. Switch to the kmem(9) from malloc(9)
