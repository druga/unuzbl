To make genfb working on NetBSD 5.1.2 release, you'll need to bring VESA support to bootloader and bring passing of screen conf
parameters from loader to genfb, for this you'll need to:

Grab:
http://cvsweb.netbsd.org/bsdweb.cgi/~checkout~/src/sys/arch/i386/stand/boot/boot2.c?rev=1.44&content-type=text/plain
http://cvsweb.netbsd.org/bsdweb.cgi/~checkout~/src/sys/arch/i386/stand/boot/Makefile.boot?rev=1.37&content-type=text/plain&sortby=date&only_with_tag=MAIN

http://cvsweb.netbsd.org/bsdweb.cgi/~checkout~/src/sys/arch/i386/stand/lib/Makefile?rev=1.27&content-type=text/plain
http://cvsweb.netbsd.org/bsdweb.cgi/~checkout~/src/sys/arch/i386/stand/lib/rasops.c?rev=1.1&content-type=text/plain
http://cvsweb.netbsd.org/bsdweb.cgi/~checkout~/src/sys/arch/i386/stand/lib/biosvbe.S?rev=1.1&content-type=text/plain
http://cvsweb.netbsd.org/bsdweb.cgi/~checkout~/src/sys/arch/i386/stand/lib/vbe.h?rev=1.2&content-type=text/plain
http://cvsweb.netbsd.org/bsdweb.cgi/~checkout~/src/sys/arch/i386/stand/lib/vbe.c?rev=1.4&content-type=text/plain
http://cvsweb.netbsd.org/bsdweb.cgi/~checkout~/src/sys/arch/i386/stand/lib/bootmenu.h?rev=1.2&content-type=text/plain
http://cvsweb.netbsd.org/bsdweb.cgi/~checkout~/src/sys/arch/i386/stand/lib/bootmenu.c?rev=1.2&content-type=text/plain

http://cvsweb.netbsd.org/bsdweb.cgi/~checkout~/src/sys/arch/i386/stand/lib/libi386.h?rev=1.31&content-type=text/plain
http://cvsweb.netbsd.org/bsdweb.cgi/~checkout~/src/sys/arch/x86/include/bootinfo.h?rev=1.15&content-type=text/plain

http://cvsweb.netbsd.org/bsdweb.cgi/~checkout~/src/sys/arch/i386/stand/lib/exec.c?rev=1.42&content-type=text/plain
http://cvsweb.netbsd.org/bsdweb.cgi/~checkout~/src/sys/arch/x86/include/loadfile_machdep.h?rev=1.4&content-type=text/plain&only_with_tag=MAIN
http://cvsweb.netbsd.org/bsdweb.cgi/~checkout~/src/sys/arch/i386/stand/lib/pcio.c?rev=1.24&content-type=text/plain&only_with_tag=MAIN


http://cvsweb.netbsd.org/bsdweb.cgi/~checkout~/src/sys/arch/x86/x86/x86_autoconf.c?rev=1.36&content-type=text/plain&only_with_tag=MAIN

Do:
echo "time_t getsecs(void);" >> libi386.h
sed -e "/module_add(fsmod);/d" -e "/if (fsmod2 != NULL && strcmp(fsmod, fsmod2) != 0)/d" -e "/if (fsmod2 != NULL && strcmp(fsmod, fsmod2) != 0)/d" -e "/module_add(fsmod2);/d" exec.c
sed "/fb.vbemode = modenum;/d" vbe.c